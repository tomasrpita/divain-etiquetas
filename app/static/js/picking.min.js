"use strict";const iptCodigo=document.getElementById("iptCodigo"),smallCodigo=document.getElementById("smallCodigo"),iptSKU=document.getElementById("iptSKU"),spinnerCodigo=document.getElementById("spinnerCodigo"),iptIdReference=document.getElementById("iptIdReference"),iptDateEntry=document.getElementById("iptDateEntry");let confirmCodigo,confirmReference=!1;iptCodigo.addEventListener("keyup",({key:e})=>{"Enter"===e&&(confirmReference?unsubscribeReference():(confirmCodigo=iptCodigo.value,getReference()))});const getReference=(e=!1)=>{spinnerCodigo.classList.remove("invisible");const i=e?confirmCodigo:iptCodigo.value;getData(`/api/reference/${i}`).then(({id:e,sku:i,availability:o,location:t,date_entry:n})=>{e?(iptSKU.value=i,o?(console.log("Disponible"),iptIdReference.value=e,iptDateEntry.value=n,iptCodigo.classList.remove("is-invalid"),iptUbicacion.value=t,iptUbicacion.classList.add("is-valid"),iptCodigo.value="",iptCodigo.focus(),confirmReference=!0,iptCodigo.setAttribute("placeholder","2 - Reingrese código de la referencia")):(console.log("No disponible"),showNoavailabilityAlert(),iptCodigo.value="",iptSKU.value="",iptUbicacion.value="",iptCodigo.setAttribute("placeholder","1 - Ingrese código de la referencia"),iptCodigo.focus(),confirmReference=!1)):(console.log("Por que estoy aqui?"),iptCodigo.classList.add("is-invalid"),smallCodigo.classList.remove("invisible"),iptCodigo.value="")}).catch(e=>{console.log(e)}).finally(()=>spinnerCodigo.classList.add("invisible"))},unsubscribeReference=()=>{iptCodigo.value===confirmCodigo?document.getElementById("formPicking").submit():iptCodigo.value===iptUbicacion.value?(console.log(iptUbicacion.value),console.log(iptCodigo.value),deleteData("/api/reference-entry/",{id_reference:iptIdReference.value,date_entry:iptDateEntry.value,location_name:iptUbicacion.value}).then(()=>console.log("Todo Bien")).catch(e=>{console.log(e)}).finally(()=>{getReference(!0)}),console.log("No existe aqui, lo eliminamos y damos siguiente ubc")):(iptCodigo.classList.add("is-invalid"),smallCodigo.classList.remove("invisible"),iptCodigo.value="")},showNoavailabilityAlert=()=>{const e=document.getElementById("panelmessages"),i=`\n    <div class="alert alert-warning alert-dismissible fade show" role="alert">\n        <strong>¡ATENCIÓN!</strong> Referencia <strong>${iptSKU.value}</strong> no disponible en el almacén\n        <button type="button" class="close" data-dismiss="alert" aria-label="Cerrar">\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>\n    `;e.innerHTML+=i};